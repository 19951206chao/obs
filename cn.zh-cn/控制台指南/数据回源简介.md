# 数据回源简介<a name="obs_03_0005"></a>

一般情况下，当客户端访问OBS时，如果OBS中没有被访问的数据，将会返回404错误。OBS提供数据回源功能，可以在被请求的数据不存在时，通过回源规则从源站获取对应数据。

## 镜像回源<a name="section122922351238"></a>

用户为桶定义镜像回源规则后，如果客户端访问OBS桶中不存在的资源，且该资源符合镜像回源规则，OBS将以镜像回源的方式去数据源站获取资源，将该资源上传到OBS中并返回给客户端。整个过程不中断业务，适用于客户源站无缝迁移数据到OBS，用户可以在无感知的情况下，低成本地迁移业务到OBS上来。镜像回源流程如[图1](#fig8517161311401)所示。

**图 1**  镜像回源流程<a name="fig8517161311401"></a>  
![](figures/镜像回源流程.png "镜像回源流程")

**约束与限制**

-   不支持匿名用户配置镜像回源规则。

-   不支持给并行文件系统配置镜像回源规则。
-   不支持OBS静态网站，即通过OBS静态网站域名下载对象出现404，不会触发镜像回源规则。
-   不支持在镜像回源规则中指定当前OBS桶域名，即源桶与目标桶不能是同一个桶。
-   不支持私有桶的镜像回源，请将源桶设置为公共读。
-   不允许多条镜像回源规则配置的文件名前缀存在相互包含或重叠的关系，即对同一个对象的请求不能同时匹配两条镜像回源规则。
-   如果一个请求同时满足镜像回源规则和重定向回源规则，OBS先执行镜像回源流程，若源站没有该对象，则再执行重定向回源流程。
-   仅桶版本号为3.0及以上的桶支持镜像回源。
-   修改镜像回源规则，需要5分钟之后才能生效。
-   最多创建10条镜像回源规则。
-   镜像回源暂时不收费。

