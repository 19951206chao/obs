# 配置跨域资源共享<a name="zh-cn_topic_0045829129"></a>

OBS Browser提供HTML5协议中的跨域资源共享CORS设置，帮助用户实现跨域访问。

## 操作步骤<a name="s933c5484fd734428b5e2e24bf708a8e5"></a>

1.  登录OBS Browser。
2.  选中待配置的桶，单击“更多 \> 配置CORS”。
3.  单击“添加”。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >OBS最多可设置100条CORS规则。  

4.  在弹出的“添加CORS规则”对话框中，填写跨域资源共享的规则。

    **图 1**  添加CORS规则<a name="fe30e6fe056434c66a690c9063d04e6bb"></a>  
    ![](figures/添加CORS规则.png "添加CORS规则")

    CORS规则各参数解释如[表1](#t810c07199d9d4fb4949e45cc402582a0)所示。

    **表 1**  CORS规则

    <a name="t810c07199d9d4fb4949e45cc402582a0"></a>
    <table><thead align="left"><tr id="r282c3ed8eee94e42b62d5849670244ca"><th class="cellrowborder" valign="top" width="32%" id="mcps1.2.3.1.1"><p id="a602c237b70394ce5a689bb6ebdca0c16"><a name="a602c237b70394ce5a689bb6ebdca0c16"></a><a name="a602c237b70394ce5a689bb6ebdca0c16"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="68%" id="mcps1.2.3.1.2"><p id="a1d5215e5897b4b16828bfbc8b1878a5a"><a name="a1d5215e5897b4b16828bfbc8b1878a5a"></a><a name="a1d5215e5897b4b16828bfbc8b1878a5a"></a>解释</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="r2ff60e1cc4c04df0bd1b01f6f2bb5196"><td class="cellrowborder" valign="top" width="32%" headers="mcps1.2.3.1.1 "><p id="a157438a1cf0e4973a1bbe1e79572c531"><a name="a157438a1cf0e4973a1bbe1e79572c531"></a><a name="a157438a1cf0e4973a1bbe1e79572c531"></a>允许的来源</p>
    </td>
    <td class="cellrowborder" valign="top" width="68%" headers="mcps1.2.3.1.2 "><p id="af293f21d2e374fa4934e7bd8be3752eb"><a name="af293f21d2e374fa4934e7bd8be3752eb"></a><a name="af293f21d2e374fa4934e7bd8be3752eb"></a>必选参数，指定允许的跨域请求的来源，即允许来自该域名下的请求访问该桶。</p>
    <p id="ac0e68ea7740c478ba86dfb9ee32ff300"><a name="ac0e68ea7740c478ba86dfb9ee32ff300"></a><a name="ac0e68ea7740c478ba86dfb9ee32ff300"></a>允许多条匹配规则，以回车换行为间隔。每个匹配规则允许使用最多一个“*”通配符。例如：</p>
    <pre class="screen" id="scbcd7fb5598746eb8312b7ae6cacc05f"><a name="scbcd7fb5598746eb8312b7ae6cacc05f"></a><a name="scbcd7fb5598746eb8312b7ae6cacc05f"></a>http://rds.example.com
    https://*.vbs.example.com</pre>
    </td>
    </tr>
    <tr id="rab81f76db9364bf8ab978a987ee0e07b"><td class="cellrowborder" valign="top" width="32%" headers="mcps1.2.3.1.1 "><p id="a25b2e075e2234e10937f43f599273668"><a name="a25b2e075e2234e10937f43f599273668"></a><a name="a25b2e075e2234e10937f43f599273668"></a>允许的方法</p>
    </td>
    <td class="cellrowborder" valign="top" width="68%" headers="mcps1.2.3.1.2 "><p id="a901f59948c80429583c364e96bd352c6"><a name="a901f59948c80429583c364e96bd352c6"></a><a name="a901f59948c80429583c364e96bd352c6"></a>必选参数，指定允许的跨域请求方法，即桶和对象的几种操作类型。包括：GET、POST、PUT、DELETE、HEAD。</p>
    </td>
    </tr>
    <tr id="r467a5c6a833f4015bb22f4087de6b74c"><td class="cellrowborder" valign="top" width="32%" headers="mcps1.2.3.1.1 "><p id="a6dc9a4d89e134b2aa83df07975ff13fe"><a name="a6dc9a4d89e134b2aa83df07975ff13fe"></a><a name="a6dc9a4d89e134b2aa83df07975ff13fe"></a>允许的头域</p>
    </td>
    <td class="cellrowborder" valign="top" width="68%" headers="mcps1.2.3.1.2 "><p id="adea4598de03143f2a8e47195d17341d1"><a name="adea4598de03143f2a8e47195d17341d1"></a><a name="adea4598de03143f2a8e47195d17341d1"></a>可选参数，指定允许的跨域请求的头域。只有匹配上允许的头域中的配置，才被视为是合法的CORS请求。</p>
    <p id="a055e9cbebabc4c85ad34a31b69b5ada3"><a name="a055e9cbebabc4c85ad34a31b69b5ada3"></a><a name="a055e9cbebabc4c85ad34a31b69b5ada3"></a>允许的头域可设置多个，多个头域之间换行隔开，每行最多可填写一个*符号，不支持&amp;、:、&lt;、空格以及中文字符。</p>
    </td>
    </tr>
    <tr id="r64d7889221344540a64115505d5e1e72"><td class="cellrowborder" valign="top" width="32%" headers="mcps1.2.3.1.1 "><p id="a910e77b75bbd4c2986a23ce2aab35e6f"><a name="a910e77b75bbd4c2986a23ce2aab35e6f"></a><a name="a910e77b75bbd4c2986a23ce2aab35e6f"></a>补充头域</p>
    </td>
    <td class="cellrowborder" valign="top" width="68%" headers="mcps1.2.3.1.2 "><p id="a4e770b7fc6404388bcf68eb959df4401"><a name="a4e770b7fc6404388bcf68eb959df4401"></a><a name="a4e770b7fc6404388bcf68eb959df4401"></a>可选参数，指CORS响应中带的补充头域，给客户端提供额外的信息。</p>
    <p id="a37cf726ebb9649ef98d0256ee1c35dc9"><a name="a37cf726ebb9649ef98d0256ee1c35dc9"></a><a name="a37cf726ebb9649ef98d0256ee1c35dc9"></a>补充头域可设置多个，多个头域之间换行隔开，不支持*、&amp;、:、&lt;、空格以及中文字符。</p>
    </td>
    </tr>
    <tr id="r878b4e4c1aa9415ebabb6923463b8153"><td class="cellrowborder" valign="top" width="32%" headers="mcps1.2.3.1.1 "><p id="a69c5c5a0268b4a33a275a5109847d94c"><a name="a69c5c5a0268b4a33a275a5109847d94c"></a><a name="a69c5c5a0268b4a33a275a5109847d94c"></a>缓存时间</p>
    </td>
    <td class="cellrowborder" valign="top" width="68%" headers="mcps1.2.3.1.2 "><p id="ab09e25a0b9b74b6a978e809ab22ba139"><a name="ab09e25a0b9b74b6a978e809ab22ba139"></a><a name="ab09e25a0b9b74b6a978e809ab22ba139"></a>必选参数，请求来源的客户端可以缓存的CORS响应时间，以秒为单位，默认为100秒。</p>
    </td>
    </tr>
    </tbody>
    </table>

5.  单击“确定”。
6.  单击“确定”，保存该规则。

    CORS配置成功后，便仅允许跨域请求来源的地址通过允许的方法访问OBS的桶。例如：为桶“testbucket”允许的来源配置为“`www.examlple.com`”，允许的方法配置为“GET”，允许的头域和补充的头域置空，缓存时间设置为“100”，则OBS仅允许来源为“`www.examlple.com`”的“GET”请求访问桶“testbucket”，且不限制该请求的头域，请求来源的客户端可缓存的该CORS请求的响应时间为100秒。

7.  在弹出的消息窗口中，单击“确定”关闭创建结果消息窗口。

