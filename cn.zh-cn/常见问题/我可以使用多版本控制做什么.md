# 我可以使用多版本控制做什么？<a name="obs_faq_0049"></a>

## 开启多版本控制<a name="section78571799554"></a>

-   桶中已有对象版本ID（空）和内容都不会变化。再次上传该同名对象，对象版本示意图如[图1](#zh-cn_topic_0129289428_fig2477115284615)所示。

    **图 1**  多版本对象示意图（已有对象）<a name="zh-cn_topic_0129289428_fig2477115284615"></a>  
    ![](figures/多版本对象示意图（已有对象）.png "多版本对象示意图（已有对象）")

-   新上传对象，OBS自动为每个对象创建唯一的版本号。上传同名的对象将以不同的版本号同时保存在OBS中，如[图2](#zh-cn_topic_0129289428_fig313745516351)所示。

    **图 2**  多版本对象示意图（新对象）<a name="zh-cn_topic_0129289428_fig313745516351"></a>  
    ![](figures/多版本对象示意图（新对象）.png "多版本对象示意图（新对象）")

    **表 1**  版本说明

    <a name="zh-cn_topic_0129289428_table049033015373"></a>
    <table><thead align="left"><tr id="zh-cn_topic_0129289428_row154903306372"><th class="cellrowborder" valign="top" width="21%" id="mcps1.2.3.1.1"><p id="zh-cn_topic_0129289428_p15490163043717"><a name="zh-cn_topic_0129289428_p15490163043717"></a><a name="zh-cn_topic_0129289428_p15490163043717"></a>版本</p>
    </th>
    <th class="cellrowborder" valign="top" width="79%" id="mcps1.2.3.1.2"><p id="zh-cn_topic_0129289428_p649011306374"><a name="zh-cn_topic_0129289428_p649011306374"></a><a name="zh-cn_topic_0129289428_p649011306374"></a>描述</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="zh-cn_topic_0129289428_row184901130183714"><td class="cellrowborder" valign="top" width="21%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0129289428_p14490930133716"><a name="zh-cn_topic_0129289428_p14490930133716"></a><a name="zh-cn_topic_0129289428_p14490930133716"></a>最新版本</p>
    </td>
    <td class="cellrowborder" valign="top" width="79%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0129289428_p15490183083718"><a name="zh-cn_topic_0129289428_p15490183083718"></a><a name="zh-cn_topic_0129289428_p15490183083718"></a>多版本控制开启后，同名对象多次操作，每次操作都会对应一个版本号进行保存。最后一次操作保存的版本号，为最新版本。</p>
    </td>
    </tr>
    <tr id="zh-cn_topic_0129289428_row16490143043711"><td class="cellrowborder" valign="top" width="21%" headers="mcps1.2.3.1.1 "><p id="zh-cn_topic_0129289428_p149053010375"><a name="zh-cn_topic_0129289428_p149053010375"></a><a name="zh-cn_topic_0129289428_p149053010375"></a>历史版本</p>
    </td>
    <td class="cellrowborder" valign="top" width="79%" headers="mcps1.2.3.1.2 "><p id="zh-cn_topic_0129289428_p1349018308373"><a name="zh-cn_topic_0129289428_p1349018308373"></a><a name="zh-cn_topic_0129289428_p1349018308373"></a>多版本控制开启后，同名对象多次操作，每次操作都会对应一个版本号进行保存。除最后一次外的，其他保存的版本号为历史版本。</p>
    </td>
    </tr>
    </tbody>
    </table>

-   列出桶内对象列表时默认列出最新对象列表。
-   可以指定版本号下载对象，不指定版本号默认下载最新的对象。
-   可以选中目标对象，并单击右侧的“删除”删除对象。对象被删除后，OBS将插入一个删除标记，对象在“已删除对象”列表中呈现。此时若访问该对象，会返回404错误。

    **图 3**  删除标记示意图<a name="zh-cn_topic_0129289428_fig12513111686"></a>  
    ![](figures/删除标记示意图.png "删除标记示意图")

-   删除带删除标记的对象可取回该对象。
-   在“已删除对象”列表，选中对象，可指定版本号彻底删除指定版本对象。
-   一个对象只会显示在对象列表或已删除对象列表中，不会同时出现。

    例如，上传一个对象A后，将其删除，对象A将显示在已删除对象列表中。若再次上传同名对象A，同名对象A会显示在对象列表中，显示在已删除对象列表中的原对象A将不会存在。对象A版本示意图如[图4](#zh-cn_topic_0129289428_fig1469714544377)所示。

    **图 4**  删除后再上传同名对象的版本示意图<a name="zh-cn_topic_0129289428_fig1469714544377"></a>  
    ![](figures/删除后再上传同名对象的版本示意图.png "删除后再上传同名对象的版本示意图")

-   除带删除标记的版本外，其他每个版本的对象存储在OBS中均需要进行计费。

## 暂停多版本控制<a name="section1023595235512"></a>

多版本控制一旦启动，不可以关闭，只能暂停使用。暂停后，新上传的对象版本号为空。若之前有空版本号的同名对象，则会覆盖该带空版本号的对象。

**图 5**  暂停多版本控制后的对象版本示意图<a name="zh-cn_topic_0129289428_fig997719201937"></a>  
![](figures/暂停多版本控制后的对象版本示意图.png "暂停多版本控制后的对象版本示意图")

当不需要对桶内对象进行版本控制时，可以暂停多版本控制：

-   历史版本将继续保留在OBS中，若这些历史版本你不再需要，请手动删除。
-   仍可以指定版本号下载对象，不指定版本号默认下载最新的对象。
-   除带删除标记的版本外，其他历史版本的对象存储在OBS中仍需要进行计费。

